(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{76:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(3),l=n(7),o=(n(0),n(93)),r={title:"Installation",sidebar_position:0},i={unversionedId:"installation",id:"installation",isDocsHomePage:!1,title:"Installation",description:"This guide covers the installation and configuration of the on-premise (self hosting) version of Texterify. If you are using the cloud version you can ignore this installation instructions, because all of the things are already covered by the Texterify team for you.",source:"@site/docs/installation.md",sourceDirName:".",slug:"/installation",permalink:"/installation",editUrl:"https://github.com/texterify/texterify-docs/edit/master/docs/installation.md",version:"current",sidebarPosition:0,frontMatter:{title:"Installation",sidebar_position:0},sidebar:"tutorialSidebar",next:{title:"Getting started",permalink:"/"}},c=[{value:"Requirements",id:"requirements",children:[]},{value:"Starting the service",id:"starting-the-service",children:[]},{value:"Creating the admin account",id:"creating-the-admin-account",children:[]},{value:"Updating the service",id:"updating-the-service",children:[]},{value:"Configuration",id:"configuration",children:[]},{value:"External services",id:"external-services",children:[{value:"E-Mail",id:"e-mail",children:[]},{value:"Machine translation",id:"machine-translation",children:[]},{value:"Over the air translations",id:"over-the-air-translations",children:[]}]},{value:"Debugging",id:"debugging",children:[]}],b={toc:c};function s(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"This guide covers the installation and configuration of the on-premise (self hosting) version of Texterify. If you are using the cloud version you can ignore this installation instructions, because all of the things are already covered by the Texterify team for you."))),Object(o.b)("h2",{id:"requirements"},"Requirements"),Object(o.b)("p",null,"Tools:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"docker"),Object(o.b)("li",{parentName:"ul"},"docker-compose")),Object(o.b)("p",null,"Accounts/Servers:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Email server or email provider account (optional but recommended)"),Object(o.b)("li",{parentName:"ul"},"DeepL account (optional)"),Object(o.b)("li",{parentName:"ul"},"Google Cloud Account (optional)")),Object(o.b)("h2",{id:"starting-the-service"},"Starting the service"),Object(o.b)("p",null,"To get you up as easy as possible run the following commands to get a complete docker-compose setup up and running:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-shell"},'# Clone the docker-compose configuration.\ngit clone https://github.com/texterify/texterify-docker-compose-setup.git\ncd texterify-docker-compose-setup\n\n# Generate a secret key for the app.\n# Make sure to keep this private.\necho SECRET_KEY_BASE=`openssl rand -hex 64` > secrets.env\n\n# Open the .env file and replace "example.com" with your host (if you\n# are trying to run Texterify locally just use "localhost" as host).\n# Also make sure to check out the other configuration options (see below).\n\n# Start the service.\ndocker volume create --name=texterify-database\ndocker volume create --name=texterify-assets\ndocker-compose up --always-recreate-deps\n\n# After everything has started create the database in another terminal.\ndocker-compose exec app bin/rails db:create db:migrate db:seed\n')),Object(o.b)("p",null,"The service is now available at ",Object(o.b)("a",{parentName:"p",href:"http://localhost"},"http://localhost")," (or whatever you have set your ",Object(o.b)("inlineCode",{parentName:"p"},"APP_HOST")," to). \ud83c\udf89"),Object(o.b)("h2",{id:"creating-the-admin-account"},"Creating the admin account"),Object(o.b)("p",null,"After installation you should immediately create an account, because the first registered user on the system is the instance admin account."),Object(o.b)("h2",{id:"updating-the-service"},"Updating the service"),Object(o.b)("p",null,"To update the service change the ",Object(o.b)("inlineCode",{parentName:"p"},"TEXTERIFY_TAG")," to a new version. Make sure to backup your database so no data is lost in case of a failure. You can then run the following commands to update Texterify to the new version:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-shell"},"# Stop the current service.\ndocker-compose down\n\n# Get the latest changes to the docker-compose setup.\n# See https://github.com/texterify/texterify-docker-compose-setup for changes.\ngit pull\ndocker-compose build\n\n# Start the service which will update Texterify to the new version.\ndocker-compose up --always-recreate-deps\n\n# In case there are database changes apply them.\ndocker-compose exec app bin/rails db:migrate db:seed\n")),Object(o.b)("h2",{id:"configuration"},"Configuration"),Object(o.b)("p",null,"The table below gives an overview of things you can configure in your Texterify instance. Make sure to also check out the ",Object(o.b)("inlineCode",{parentName:"p"},".env")," file."),Object(o.b)("table",null,Object(o.b)("tr",null,Object(o.b)("th",null,"Name"),Object(o.b)("th",null,"Default"),Object(o.b)("th",null,"Description")),Object(o.b)("tr",null,Object(o.b)("td",null,"MAILER_HOST"),Object(o.b)("td",null,"example.com"),Object(o.b)("td",null,"Set the domain of the emails sent from Texterify (e.g. no-reply@example.com for the default value).")),Object(o.b)("tr",null,Object(o.b)("td",null,"APP_HOST"),Object(o.b)("td",null,"example.com"),Object(o.b)("td",null,"The fully qualified name of the web server (for example used for constructing email links).")),Object(o.b)("tr",null,Object(o.b)("td",null,"ASSET_HOST"),Object(o.b)("td",null,"example.com"),Object(o.b)("td",null,"The fully qualified name of the asset server. This is normally the same as the ",Object(o.b)("b",null,"APP_HOST"),".")),Object(o.b)("tr",null,Object(o.b)("td",null,"EMAIL_CONFIRMATION_REQUIRED"),Object(o.b)("td",null,"false"),Object(o.b)("td",null,"Whether email confirmation is required or not. If set to true make sure to also configure your email server.")),Object(o.b)("tr",null,Object(o.b)("td",null,"DB_PROD_HOST"),Object(o.b)("td",null,"db"),Object(o.b)("td",null,"The database host.")),Object(o.b)("tr",null,Object(o.b)("td",null,"DB_PROD_USERNAME"),Object(o.b)("td",null,"postgres"),Object(o.b)("td",null,"The database username.")),Object(o.b)("tr",null,Object(o.b)("td",null,"DB_PROD_DATABASE"),Object(o.b)("td",null,"texterify_production"),Object(o.b)("td",null,"The name of your database.")),Object(o.b)("tr",null,Object(o.b)("td",null,"DB_PROD_PASSWORD"),Object(o.b)("td",null),Object(o.b)("td",null,"The password of your database user if needed.")),Object(o.b)("tr",null,Object(o.b)("td",null,"http_proxy"),Object(o.b)("td",null),Object(o.b)("td",null,"Specify a HTTP proxy for your application."))),Object(o.b)("h2",{id:"external-services"},"External services"),Object(o.b)("p",null,"Texterify makes use of some external services. Below you find instructions on how to configure them."),Object(o.b)("h3",{id:"e-mail"},"E-Mail"),Object(o.b)("p",null,"You need to configure a mail server so Texterify can send emails (e.g. password forgot emails). Make use of the following configuration options to integrate your mail server or provider:"),Object(o.b)("table",null,Object(o.b)("tr",null,Object(o.b)("th",null,"Name"),Object(o.b)("th",null,"Default"),Object(o.b)("th",null,"Description")),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_ADDRESS"),Object(o.b)("td",null,"localhost"),Object(o.b)("td",null,"The address of the mail server.")),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_PORT"),Object(o.b)("td",null,"25"),Object(o.b)("td",null,"The port of the mail server.")),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_DOMAIN"),Object(o.b)("td",null),Object(o.b)("td",null,"If you need to specify a HELO domain.")),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_USER_NAME"),Object(o.b)("td",null),Object(o.b)("td",null,"Specify a username if your server requires authentication.")),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_PASSWORD"),Object(o.b)("td",null),Object(o.b)("td",null,"Specify a password if your server requires authentication.")),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_AUTHENTICATION"),Object(o.b)("td",null),Object(o.b)("td",null,"You can specify the authentication type here. Choose one of the following if needed:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"plain")," (will send the password in the clear)"),Object(o.b)("li",null,Object(o.b)("b",null,"login")," (will send password Base64 encoded)"),Object(o.b)("li",null,Object(o.b)("b",null,"cram_md5")," (combines a Challenge/Response mechanism to exchange information and a cryptographic Message Digest 5 algorithm to hash important information)")))),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_ENABLE_STARTTLS_AUTO"),Object(o.b)("td",null,"true"),Object(o.b)("td",null,"Determines if STARTTLS is enabled in your SMTP server and starts to use it.")),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_OPENSSL_VERIFY_MODE"),Object(o.b)("td",null),Object(o.b)("td",null,"When you use TLS you can define how OpenSSL checks the certificate. Choose one of the following if needed:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"none")),Object(o.b)("li",null,Object(o.b)("b",null,"peer"))))),Object(o.b)("tr",null,Object(o.b)("td",null,"SMTP_TLS"),Object(o.b)("td",null,"false"),Object(o.b)("td",null,"Enables the SMTP connection to use SMTP/TLS (SMTPS: SMTP over direct TLS connection)."))),Object(o.b)("h3",{id:"machine-translation"},"Machine translation"),Object(o.b)("p",null,"Texterify does all the handling around machine translation for you, but the text is finally translated by DeepL. Therefore if you want to use machine translation you need to configure DeepL:"),Object(o.b)("table",null,Object(o.b)("tr",null,Object(o.b)("th",null,"Name"),Object(o.b)("th",null,"Default"),Object(o.b)("th",null,"Description")),Object(o.b)("tr",null,Object(o.b)("td",null,"DEEPL_API_TOKEN"),Object(o.b)("td",null),Object(o.b)("td",null,"If you want to use machine translation you need to create an account on ",Object(o.b)("a",{href:"https://www.deepl.com",target:"_blank"},"www.deepl.com")," and set your API token here."))),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"This feature requires communication outside of your network. If a proxy is required for communication you can set the proxy with the ",Object(o.b)("inlineCode",{parentName:"p"},"http_proxy")," environment variable."))),Object(o.b)("h3",{id:"over-the-air-translations"},"Over the air translations"),Object(o.b)("p",null,"The over the air feature works by hosting the translation files on the Google Cloud. If you need to make use of this feature you will have to ",Object(o.b)("a",{parentName:"p",href:"https://cloud.google.com/storage/docs/creating-buckets"},"create a storage bucket")," and configure it:"),Object(o.b)("table",null,Object(o.b)("tr",null,Object(o.b)("th",null,"Name"),Object(o.b)("th",null,"Default"),Object(o.b)("th",null,"Description")),Object(o.b)("tr",null,Object(o.b)("td",null,"GOOGLE_CLOUD_PROJECT"),Object(o.b)("td",null),Object(o.b)("td",null,"The name of your Google Cloud project.")),Object(o.b)("tr",null,Object(o.b)("td",null,"GOOGLE_CLOUD_KEYFILE"),Object(o.b)("td",null),Object(o.b)("td",null,"The Google Cloud key file used for authentication. See ",Object(o.b)("a",{href:"https://cloud.google.com/iam/docs/creating-managing-service-account-keys",target:"_blank"},"here")," for more information.")),Object(o.b)("tr",null,Object(o.b)("td",null,"GOOGLE_CLOUD_OTA_BUCKET_NAME"),Object(o.b)("td",null),Object(o.b)("td",null,"The name of the bucket used for storing the translation bundles."))),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"This feature requires communication outside of your network. If a proxy is required for communication you can set the proxy with the ",Object(o.b)("inlineCode",{parentName:"p"},"http_proxy")," environment variable."))),Object(o.b)("h2",{id:"debugging"},"Debugging"),Object(o.b)("p",null,"If you experience any issues you can always check the logs of the application which might give a hint about the issue you are currently facing. To view the logs start the app and then execute the following commands:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-shell"},"docker exec -it texterify-docker-compose-setup_app_1 /bin/sh\ncat log/production.log\n")),Object(o.b)("p",null,"This will give you the logs of the application server."))}s.isMDXComponent=!0},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var a=n(0),l=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var b=l.a.createContext({}),s=function(e){var t=l.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return l.a.createElement(b.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},h=l.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),u=s(n),h=a,p=u["".concat(r,".").concat(h)]||u[h]||d[h]||o;return n?l.a.createElement(p,i(i({ref:t},b),{},{components:n})):l.a.createElement(p,i({ref:t},b))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=h;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,r[1]=i;for(var b=2;b<o;b++)r[b]=n[b];return l.a.createElement.apply(null,r)}return l.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);